<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STREAMBOX | Cin√©ma Illimit√©</title>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #ff0a16; /* Rouge Netflix/Youtube */
            --dark: #0a0a0a;
            --gray: #1f1f1f;
            --light: #e5e5e5;
            --glass: rgba(20, 20, 20, 0.85);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            font-family: 'Urbanist', sans-serif;
            overflow-x: hidden;
        }

        /* --- NAVIGATION --- */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding: 20px 4%;
            display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.95), transparent);
            transition: 0.4s;
        }
        nav.scrolled { background: var(--dark); box-shadow: 0 4px 20px rgba(0,0,0,0.5); }

        .logo { font-size: 28px; font-weight: 900; letter-spacing: -1px; color: var(--primary); text-transform: uppercase; }
        .logo span { color: white; }

        .nav-links button {
            background: transparent; border: 1px solid rgba(255,255,255,0.2); 
            color: white; padding: 8px 20px; border-radius: 50px; 
            cursor: pointer; margin-left: 10px; font-weight: 600;
            transition: 0.3s;
        }
        .nav-links button:hover, .nav-links button.active {
            background: var(--primary); border-color: var(--primary);
        }

        /* --- HERO HEADER --- */
        header {
            height: 75vh;
            position: relative;
            display: flex; align-items: center; padding: 0 4%;
            background-size: cover; background-position: center;
            transition: background-image 0.5s ease-in-out;
        }
        header::after {
            content: ''; position: absolute; inset: 0;
            background: radial-gradient(circle at 70% 50%, transparent, var(--dark));
            background: linear-gradient(to top, var(--dark) 10%, transparent 80%);
        }

        .hero-content { position: relative; z-index: 2; max-width: 650px; }
        .badge { background: var(--primary); color: white; padding: 5px 12px; font-size: 12px; font-weight: 800; border-radius: 4px; text-transform: uppercase; }
        .hero-title { font-size: 4.5rem; line-height: 1; margin: 15px 0; text-shadow: 0 4px 15px rgba(0,0,0,0.8); }
        .hero-desc { font-size: 1.1rem; color: #ccc; margin-bottom: 30px; line-height: 1.6; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        .btn-play {
            padding: 15px 40px; background: white; color: black; border: none; 
            font-size: 1.2rem; font-weight: 800; border-radius: 8px; cursor: pointer; 
            display: inline-flex; align-items: center; gap: 10px; transition: transform 0.2s;
        }
        .btn-play:hover { transform: scale(1.05); background: #f0f0f0; }

        /* --- CATALOGUE --- */
        .category-section { padding: 40px 0 20px 4%; }
        .cat-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .cat-title i { color: var(--primary); font-size: 1rem; }

        .row-container {
            display: flex; overflow-x: auto; gap: 15px; padding-bottom: 20px;
            scroll-behavior: smooth; scrollbar-width: none;
        }
        .row-container::-webkit-scrollbar { display: none; }

        .movie-card {
            min-width: 200px; height: 300px;
            border-radius: 12px; overflow: hidden; position: relative;
            cursor: pointer; transition: 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background: var(--gray);
            flex-shrink: 0;
        }

        .movie-card:hover { transform: scale(1.1); z-index: 10; box-shadow: 0 10px 40px rgba(0,0,0,0.6); }

        .movie-poster { width: 100%; height: 100%; object-fit: cover; }
        
        .movie-info {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, black, transparent);
            padding: 20px 10px 10px; opacity: 0; transition: 0.3s;
        }
        .movie-card:hover .movie-info { opacity: 1; }
        .movie-title { font-size: 0.9rem; font-weight: 700; margin-bottom: 5px; }

        /* --- MODAL PLAYER --- */
        .modal {
            position: fixed; inset: 0; z-index: 2000;
            background: rgba(0,0,0,0.95); display: none;
            justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s;
        }
        .modal.active { display: flex; opacity: 1; }
        
        .video-wrapper {
            width: 90%; max-width: 1200px; aspect-ratio: 16/9;
            background: black; border-radius: 12px; overflow: hidden;
            box-shadow: 0 0 50px rgba(255, 10, 22, 0.2);
            position: relative;
        }
        
        .close-btn {
            position: absolute; top: -50px; right: 0; color: white; font-size: 2rem; cursor: pointer;
        }

        /* --- LOADING SPINNER --- */
        .loader {
            text-align: center; padding: 50px; color: var(--primary); font-size: 2rem; display: none;
        }

        @media(max-width: 768px) {
            .hero-title { font-size: 2.5rem; }
            .movie-card { min-width: 140px; height: 210px; }
        }
    </style>
</head>
<body>

    <nav id="navbar">
        <div class="logo">STREAM<span>BOX</span></div>
        <div class="nav-links">
            <button class="active" onclick="filterBy('all')">Tout</button>
            <button onclick="filterBy('Benin')">B√©nin</button>
            <button onclick="filterBy('Nollywood')">Nollywood</button>
            <button onclick="filterBy('Kdrama')">Asie</button>
        </div>
    </nav>

    <header id="hero-header">
        <div class="hero-content">
            <span class="badge" id="hero-badge">√Ä LA UNE</span>
            <h1 class="hero-title" id="hero-title">Chargement...</h1>
            <p class="hero-desc" id="hero-desc">Veuillez patienter pendant que nous r√©cup√©rons les meilleurs films depuis YouTube...</p>
            <button class="btn-play" id="hero-play"><i class="fa-solid fa-play"></i> REGARDER</button>
        </div>
    </header>

    <div id="main-content" style="margin-top: -50px; position: relative; z-index: 10;">
        </div>

    <div class="loader" id="loader"><i class="fa-solid fa-circle-notch fa-spin"></i></div>

    <div class="modal" id="videoModal">
        <div style="position: relative; width: 100%; display: flex; justify-content: center;">
            <div class="close-btn" onclick="closeVideo()"><i class="fa-solid fa-xmark"></i></div>
            <div class="video-wrapper">
                <div id="player"></div>
            </div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // =================================================================
        // CONFIGURATION - C'EST ICI QUE TU COLLES TA CL√â API
        // =================================================================
        
        // 1. Colle ta cl√© API Google/YouTube ici (celle qui commence par AIza...)
        const API_KEY = 'AIzaSyCo4xWGX9xjFwCoGqum17qvCpr5liZtOq4'; 

        // 2. ID de ta propre cha√Æne YouTube (pour l'afficher en premier)
        // Laisse vide '' si tu n'en as pas. Trouve ton ID dans les param√®tres avanc√©s de YouTube.
        const USER_CHANNEL_ID = ''; 

        // =================================================================
        // CATALOGUE AUTOMATIQUE (Mots-cl√©s de recherche)
        // =================================================================
        const CATALOG_CONFIG = [
            { id: 'MyContent', title: 'üíé Mes Contenus Exclusifs', type: 'channel', query: USER_CHANNEL_ID },
            { id: 'Benin', title: 'üáßüáØ Cin√©ma B√©ninois', type: 'search', query: 'Film B√©ninois Complet 2025' },
            { id: 'Nollywood', title: 'üá≥üá¨ Nollywood en Fran√ßais', type: 'search', query: 'Film Nig√©rian en fran√ßais complet 2025' },
            { id: 'Ivory', title: 'üá®üáÆ S√©ries Ivoiriennes', type: 'search', query: 'S√©rie Ivoirienne √©pisode complet' },
            { id: 'Kdrama', title: 'üá∞üá∑ K-Drama & Asie (VF)', type: 'search', query: 'Drama Cor√©en Fran√ßais Complet' },
            { id: 'Bollywood', title: 'üáÆüá≥ Bollywood Passion', type: 'search', query: 'Film Indien en fran√ßais complet' },
            { id: 'Novelas', title: '‚ù§Ô∏è Telenovelas & Amour', type: 'search', query: 'Novelas fran√ßais complet' },
            { id: 'Action', title: 'üî• Films d\'Action', type: 'search', query: 'Film action complet en fran√ßais' }
        ];

        // =================================================================
        // LOGIQUE DU SYST√àME
        // =================================================================
        
        const mainContent = document.getElementById('main-content');
        const loader = document.getElementById('loader');
        let player; // Youtube Player Instance

        // Fonction principale de chargement
        async function initApp() {
            if(API_KEY === 'VOTRE_CLE_API_ICI') {
                alert("‚ö†Ô∏è ATTENTION : Vous devez coller votre cl√© API dans le code √† la ligne 185 pour que le site fonctionne !");
                return;
            }

            // Charger les sections
            for (const cat of CATALOG_CONFIG) {
                // Si pas d'ID cha√Æne utilisateur, on saute cette section
                if(cat.id === 'MyContent' && !USER_CHANNEL_ID) continue;

                await createSection(cat);
            }

            // Mettre un film al√©atoire en Hero
            setTimeout(setRandomHero, 2000);
        }

        // Cr√©er une section HTML et lancer la recherche API
        async function createSection(category) {
            // Cr√©ation du HTML
            const section = document.createElement('div');
            section.className = 'category-section';
            section.innerHTML = `
                <h2 class="cat-title"><i class="fa-solid fa-play"></i> ${category.title}</h2>
                <div class="row-container" id="row-${category.id}">
                    <div style="padding:20px; color:#666;">Chargement du catalogue...</div>
                </div>
            `;
            mainContent.appendChild(section);

            // Appel API YouTube
            const videos = await fetchVideosFromYouTube(category);
            
            // Remplissage des vid√©os
            const row = document.getElementById(`row-${category.id}`);
            row.innerHTML = ''; // Vider le texte de chargement

            if(videos.length === 0) {
                row.innerHTML = '<div style="padding:20px;">Aucun contenu trouv√©. V√©rifiez votre cl√© API.</div>';
                return;
            }

            videos.forEach(video => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                // On stocke les donn√©es du film dans l'√©l√©ment pour le Hero
                card.dataset.title = video.snippet.title;
                card.dataset.desc = video.snippet.description;
                card.dataset.img = video.snippet.thumbnails.high.url;
                card.dataset.id = video.id.videoId;

                card.innerHTML = `
                    <img src="${video.snippet.thumbnails.medium.url}" class="movie-poster" alt="${video.snippet.title}">
                    <div class="movie-info">
                        <div class="movie-title">${video.snippet.title}</div>
                    </div>
                `;
                
                // Clic pour lancer la vid√©o
                card.onclick = () => openVideo(video.id.videoId);
                row.appendChild(card);
            });
        }

        // Fonction de recherche API
        async function fetchVideosFromYouTube(category) {
            let url = '';
            const max = 15; // Nombre de films par cat√©gorie

            if (category.type === 'channel') {
                // R√©cup√©rer les uploads d'une cha√Æne sp√©cifique
                url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${category.query}&order=date&type=video&maxResults=${max}&key=${API_KEY}`;
            } else {
                // Recherche par mots-cl√©s
                url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(category.query)}&type=video&videoDuration=long&maxResults=${max}&key=${API_KEY}`;
            }

            try {
                const response = await fetch(url);
                const data = await response.json();
                if(data.error) {
                    console.error("Erreur API YouTube:", data.error.message);
                    return [];
                }
                return data.items || [];
            } catch (error) {
                console.error("Erreur r√©seau:", error);
                return [];
            }
        }

        // Mettre un film en vedette (Hero)
        function setRandomHero() {
            const allCards = document.querySelectorAll('.movie-card');
            if(allCards.length > 0) {
                const randomCard = allCards[Math.floor(Math.random() * allCards.length)];
                
                document.getElementById('hero-title').innerText = randomCard.dataset.title;
                document.getElementById('hero-desc').innerText = randomCard.dataset.desc || "Un film s√©lectionn√© pour vous.";
                document.getElementById('hero-header').style.backgroundImage = `url('${randomCard.dataset.img.replace('mqdefault', 'maxresdefault')}')`;
                
                // Configurer le bouton lecture
                document.getElementById('hero-play').onclick = () => openVideo(randomCard.dataset.id);
            }
        }

        // Lecteur Vid√©o
        function openVideo(videoId) {
            const modal = document.getElementById('videoModal');
            modal.classList.add('active');
            
            if (player) {
                player.loadVideoById(videoId);
            } else {
                player = new YT.Player('player', {
                    height: '100%',
                    width: '100%',
                    videoId: videoId,
                    playerVars: { 'autoplay': 1, 'rel': 0, 'modestbranding': 1 }
                });
            }
        }

        function closeVideo() {
            const modal = document.getElementById('videoModal');
            modal.classList.remove('active');
            if (player) player.stopVideo();
        }

        // Filtres Navigation
        function filterBy(term) {
            const sections = document.querySelectorAll('.category-section');
            sections.forEach(sec => {
                if(term === 'all') {
                    sec.style.display = 'block';
                } else {
                    // Recherche simple dans le titre de la section
                    const title = sec.querySelector('h2').innerText;
                    if(title.includes(term) || (term === 'Kdrama' && title.includes('Asie'))) {
                        sec.style.display = 'block';
                    } else {
                        sec.style.display = 'none';
                    }
                }
            });
            
            // Gestion boutons actifs
            document.querySelectorAll('.nav-links button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Effet scroll navbar
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if(window.scrollY > 50) nav.classList.add('scrolled');
            else nav.classList.remove('scrolled');
        });

        // Lancer l'app au chargement
        window.onload = initApp;

    </script>
</body>
</html>
